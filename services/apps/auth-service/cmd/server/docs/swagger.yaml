definitions:
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthFormDetail:
    properties:
      applicant:
        description: 申请人
        type: string
      applicant_name:
        description: 申请人
        type: string
      apply_time:
        description: 申请时间
        type: integer
      created_at:
        description: 创建时间, 申请时间
        type: string
      data_business_name:
        description: 库表名称（业务名称）
        type: string
      data_id:
        description: 库表ID
        type: string
      data_tech_name:
        description: 技术名称
        type: string
      draft_expired_at:
        type: integer
      draft_request_type:
        description: 草稿请求类型
        type: string
      draft_spec:
        type: string
      expired_at:
        description: 权限过期时间，前端详情用
        type: integer
      id:
        description: 申请单ID
        type: string
      name:
        description: 申请单名称
        type: string
      request_type:
        description: 请求类型
        type: string
      spec:
        description: 行列规则压缩成的字符串，前端详情使用
        type: string
      status:
        $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestStatus'
      updated_at:
        description: 更新时间
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthFormListItem:
    properties:
      applicant:
        description: 申请人
        type: string
      applicant_name:
        description: 申请人
        type: string
      apply_time:
        description: 申请时间
        type: integer
      created_at:
        description: 创建时间, 申请时间
        type: string
      data_business_name:
        description: 库表名称（业务名称）
        type: string
      data_id:
        description: 库表ID
        type: string
      data_tech_name:
        description: 技术名称
        type: string
      id:
        description: 申请单ID
        type: string
      name:
        description: 申请单名称
        type: string
      status:
        $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestStatus'
      updated_at:
        description: 更新时间
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthReqFormAuditListItem:
    properties:
      applicant:
        description: 申请人ID
        type: string
      applicant_name:
        description: 申请人名称
        type: string
      apply_id:
        description: 申请ID
        type: string
      apply_time:
        description: 申请时间
        type: string
      audit_status:
        description: 审核状态
        type: string
      audit_time:
        description: 审核时间，2006-01-02 15:04:05
        type: string
      biz_type:
        description: 业务类型, 审核类型
        type: string
      data_business_name:
        description: 库表名称（业务名称）
        type: string
      data_id:
        description: 库表ID
        type: string
      data_tech_name:
        description: 技术名称
        type: string
      id:
        description: 申请单ID
        type: string
      name:
        description: 申请单名称
        type: string
      proc_inst_id:
        description: 审核实例ID
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestArg:
    properties:
      data_id:
        description: 库表ID
        type: string
      expired_at:
        description: 权限过期时间时间戳
        type: integer
      name:
        description: 申请单名称
        maxLength: 128
        minLength: 1
        type: string
      request_type:
        description: 申请类型
        enum:
        - check
        - query
        type: string
      spec:
        description: 行列规则压缩成的字符串
        type: string
    required:
    - data_id
    - name
    - request_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestStatus:
    properties:
      apply_id:
        description: 审核流程 ID
        example: 0194078a-9319-77d1-8229-b27cb5e1e845
        type: string
      message:
        description: 逻辑视图授权申请处于当前阶段的原因，人类可读
        example: 申请被驳回
        type: string
      phase:
        description: 逻辑视图授权申请所处的阶段
        type: string
      proc_def_key:
        description: 审核流程的 key
        example: Process_VP2LSITg
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Department:
    properties:
      department_id:
        description: 部门id
        example: 01940797-4ee0-7ec9-a053-8ce9e0ad1271
        type: string
      department_name:
        description: 部门名称
        example: 部门名称
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.GetObjectsBySubjectId:
    properties:
      expired_at:
        description: 过期时间，未指定代表永久生效。
        type: string
      object_id:
        description: 资源id
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
      permissions:
        description: 权限
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Permission'
        type: array
    required:
    - object_id
    - object_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.GetObjectsBySubjectIdRes:
    properties:
      entries:
        description: 对象列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.GetObjectsBySubjectId'
        type: array
      total_count:
        description: 总数量
        type: integer
    required:
    - total_count
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.IDResp:
    properties:
      id:
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ListSubViews:
    properties:
      columns:
        description: 子视图的列名称列表
        items:
          type: string
        type: array
      id:
        description: 子视图 ID
        type: string
      logic_view_id:
        description: 子视图所属逻辑视图 ID
        type: string
      logic_view_name:
        description: 子视图所属逻辑视图名称
        type: string
      name:
        description: 子视图名称
        type: string
      row_filter_clause:
        description: 行过滤子句
        type: string
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ListSubViewsRes:
    properties:
      entries:
        description: 对象列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ListSubViews'
        type: array
      total_count:
        description: 总数量
        type: integer
    required:
    - total_count
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ObjectOwner:
    properties:
      departments:
        description: 所属部门
        items:
          items:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Department'
          type: array
        type: array
      owner_id:
        description: ID
        type: string
      owner_name:
        description: 名称
        type: string
    type: object
  ? github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PageResult-github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto_DataAuthFormListItem
  : properties:
      entries:
        description: 对象列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthFormListItem'
        type: array
      total_count:
        description: 总数量
        type: integer
    required:
    - total_count
    type: object
  ? github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PageResult-github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto_DataAuthReqFormAuditListItem
  : properties:
      entries:
        description: 对象列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthReqFormAuditListItem'
        type: array
      total_count:
        description: 总数量
        type: integer
    required:
    - total_count
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Permission:
    properties:
      action:
        description: 请求动作 view查看 read读取  download下载 auth授权 allocate授权(仅分配)
        enum:
        - view
        - read
        - download
        - auth
        - allocate
        - apply
        type: string
      effect:
        description: 策略结果 allow 允许 deny 拒绝
        enum:
        - allow
        - deny
        type: string
    required:
    - action
    - effect
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyCreateReq:
    properties:
      auth_scope_id:
        description: 授权范围
        type: string
      auth_scope_type:
        description: 授权范围资源的类型
        type: string
      department_id:
        description: 资源的部门，不是子资源的
        type: string
      object_id:
        description: 资源id
        example: 01940795-d488-77ea-ab48-689d2683a623
        maxLength: 128
        type: string
      object_name:
        description: 资源名称
        example: 东区销售数据
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
      owner_departments:
        description: 数据Owner所属部门
        items:
          items:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Department'
          type: array
        type: array
      owner_id:
        description: 数据OwnerId
        example: 01940796-7bc2-7462-81eb-c7e6399f08fb
        type: string
      owner_name:
        description: 数据Owner名称
        example: 用户名称
        type: string
      owners:
        description: 数据的 Owner 列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ObjectOwner'
        type: array
      source_object_id:
        example: 视图，接口，指标的ID
        type: string
      subjects:
        description: 访问者
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject'
        minItems: 1
        type: array
      subjects_extend:
        description: 继承权限的访问者
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject'
        type: array
    required:
    - object_id
    - object_type
    - subjects
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyEnforce:
    properties:
      action:
        description: 请求动作 view 查看 read 读取 download 下载
        enum:
        - view
        - read
        - download
        - auth
        - allocate
        - apply
        type: string
      object_id:
        description: 资源id
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
      subject_id:
        description: 访问者id
        maxLength: 128
        type: string
      subject_type:
        description: 访问者类型 app 应用 user 用户 department 部门 role 角色
        enum:
        - app
        - user
        - department
        - role
        type: string
    required:
    - action
    - object_id
    - object_type
    - subject_id
    - subject_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyEnforceEffect:
    properties:
      action:
        description: 请求动作 view 查看 read 读取 download 下载
        enum:
        - view
        - read
        - download
        - auth
        - allocate
        - apply
        type: string
      effect:
        description: 策略结果 allow 允许 deny 拒绝
        type: string
      object_id:
        description: 资源id
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
      subject_id:
        description: 访问者id
        maxLength: 128
        type: string
      subject_type:
        description: 访问者类型 app 应用 user 用户 department 部门 role 角色
        enum:
        - app
        - user
        - department
        - role
        type: string
    required:
    - action
    - object_id
    - object_type
    - subject_id
    - subject_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyGetRes:
    properties:
      auth_scope_id:
        description: 授权范围
        type: string
      auth_scope_type:
        description: 授权范围资源的类型
        type: string
      department_id:
        description: 资源的部门，不是子资源的
        type: string
      object_id:
        description: 资源id
        example: 01940795-d488-77ea-ab48-689d2683a623
        maxLength: 128
        type: string
      object_name:
        description: 资源名称
        example: 东区销售数据
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
      owner_departments:
        description: 数据Owner所属部门
        items:
          items:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Department'
          type: array
        type: array
      owner_id:
        description: 数据OwnerId
        example: 01940796-7bc2-7462-81eb-c7e6399f08fb
        type: string
      owner_name:
        description: 数据Owner名称
        example: 用户名称
        type: string
      owners:
        description: 数据的 Owner 列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ObjectOwner'
        type: array
      source_object_id:
        example: 视图，接口，指标的ID
        type: string
      subjects:
        description: 访问者
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject'
        minItems: 1
        type: array
      subjects_extend:
        description: 继承权限的访问者
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject'
        type: array
    required:
    - object_id
    - object_type
    - subjects
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyUpdateReq:
    properties:
      auth_scope_id:
        description: 授权范围
        type: string
      auth_scope_type:
        description: 授权范围资源的类型
        type: string
      department_id:
        description: 资源的部门，不是子资源的
        type: string
      object_id:
        description: 资源id
        example: 01940795-d488-77ea-ab48-689d2683a623
        maxLength: 128
        type: string
      object_name:
        description: 资源名称
        example: 东区销售数据
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
      owner_departments:
        description: 数据Owner所属部门
        items:
          items:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Department'
          type: array
        type: array
      owner_id:
        description: 数据OwnerId
        example: 01940796-7bc2-7462-81eb-c7e6399f08fb
        type: string
      owner_name:
        description: 数据Owner名称
        example: 用户名称
        type: string
      owners:
        description: 数据的 Owner 列表
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ObjectOwner'
        type: array
      partial:
        description: 是否只修改指定 subjects 的权限。false 将移除 subjects 未指定的用户、应用的权限
        type: boolean
      preserve_expired_at:
        description: 是否保持权限的过期时间不变。
        type: boolean
      source_object_id:
        example: 视图，接口，指标的ID
        type: string
      subjects:
        description: 访问者
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject'
        type: array
      subjects_extend:
        description: 继承权限的访问者
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject'
        type: array
    required:
    - object_id
    - object_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.RulePolicyEnforce:
    properties:
      action:
        description: 请求动作 view 查看 read 读取 download 下载
        type: string
      object_id:
        description: 资源id
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        type: string
      user_id:
        description: 用户UID
        type: string
    required:
    - action
    - object_id
    - object_type
    - user_id
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.RulePolicyEnforceEffect:
    properties:
      action:
        description: 请求动作 view 查看 read 读取 download 下载
        enum:
        - view
        - read
        - download
        - allocate
        - auth
        - apply
        type: string
      effect:
        description: 策略结果 allow 允许 deny 拒绝
        type: string
      object_id:
        description: 资源id
        maxLength: 128
        type: string
      object_type:
        description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        type: string
    required:
    - action
    - object_id
    - object_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Subject:
    properties:
      departments:
        description: 所属部门
        items:
          items:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Department'
          type: array
        type: array
      expired_at:
        description: 过期时间，未指定代表永久生效。
        type: string
      permissions:
        description: 权限设置
        items:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.Permission'
        minItems: 1
        type: array
      policy_id:
        description: 策略ID，由ISF返回的，用来更新的
        type: string
      subject_id:
        description: 访问者id
        example: 01940797-fc33-76ad-98c4-f9e4457ace03
        maxLength: 128
        type: string
      subject_name:
        description: 访问者名称
        example: 访问者名称
        maxLength: 128
        type: string
      subject_type:
        description: 访问者类型 app 应用 user 用户 department 部门 role 角色
        enum:
        - app
        - user
        - department
        - role
        type: string
      user_status:
        allOf:
        - $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.UserStatus'
        description: 用户状态，仅当访问者类型 SubjectType 是 user 时有值
    required:
    - permissions
    - subject_id
    - subject_type
    type: object
  github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.UserStatus:
    enum:
    - Unknown
    - Normal
    - Deleted
    type: string
    x-enum-comments:
      UserDeleted: 已删除
      UserNormal: 正常
      UserUnknown: 未知
    x-enum-varnames:
    - UserUnknown
    - UserNormal
    - UserDeleted
  github_com_kweaver-ai_idrm-go-common_api_meta_v1.Direction:
    enum:
    - asc
    - desc
    type: string
    x-enum-varnames:
    - Ascending
    - Descending
  rest.HttpError:
    properties:
      cause:
        description: 错误原因
        example: 错误原因
        type: string
        x-omitempty: false
      code:
        description: '返回错误码，格式: 服务名.模块.错误'
        example: task-center.Public.InternalError
        type: string
      description:
        description: 错误描述
        example: 内部错误
        type: string
      detail:
        description: 错误详情, 一般是json对象
        x-omitempty: false
      solution:
        description: 错误处理办法
        example: 请联系内部人员
        type: string
        x-omitempty: false
    type: object
  v1.Field:
    properties:
      data_type:
        description: 数据类型,由逻辑视图定义。
        type: string
      id:
        description: 字段 ID
        type: string
      name:
        description: 中文名称、业务名称
        type: string
      name_en:
        description: 英文名称、技术名称
        type: string
    type: object
  v1.IndicatorDimensionalRule:
    properties:
      metadata:
        allOf:
        - $ref: '#/definitions/v1.Metadata'
        description: 元数据
      spec:
        allOf:
        - $ref: '#/definitions/v1.IndicatorDimensionalRuleSpec'
        description: 指标维度规则的内容
    type: object
  v1.IndicatorDimensionalRuleList:
    properties:
      entries:
        description: 对象列表
        items:
          $ref: '#/definitions/v1.IndicatorDimensionalRule'
        type: array
      total_count:
        description: 总数量
        type: integer
    type: object
  v1.IndicatorDimensionalRuleSort:
    enum:
    - is_authorized
    type: string
    x-enum-varnames:
    - IndicatorDimensionalRuleSortIsAuthorized
  v1.IndicatorDimensionalRuleSpec:
    properties:
      auth_scope_id:
        description: 上一级的范围ID
        example: "0"
        type: string
      can_auth:
        description: 当前用户是否有该指标维度的授权权限
        type: boolean
      fields:
        description: 列、字段列表
        items:
          $ref: '#/definitions/v1.Field'
        type: array
      fixed_row_filters:
        allOf:
        - $ref: '#/definitions/v1.RowFilters'
        description: 固定的行过滤规则
      indicator_id:
        description: 维度规则所属指标的 ID
        example: "0"
        type: string
      name:
        description: 名称
        type: string
      row_filters:
        allOf:
        - $ref: '#/definitions/v1.RowFilters'
        description: 行过滤规则，nil 代表没有过滤规则
      scope_fields:
        description: 固定范围的字段，
        items:
          type: string
        type: array
    type: object
  v1.Member:
    properties:
      data_type:
        description: 数据类型,由逻辑视图定义。
        type: string
      id:
        description: 字段 ID
        type: string
      name:
        description: 中文名称、业务名称
        type: string
      name_en:
        description: 英文名称、技术名称
        type: string
      operator:
        description: 限定条件
        type: string
      value:
        description: 限定比较值
        type: string
    type: object
  v1.Metadata:
    properties:
      created_at:
        description: 创建时间
        type: string
      deleted_at:
        description: |-
          删除时间。当用户请求优雅删除时，服务器会设置这个字段，并不是由用户直接设
          置。
        type: string
      id:
        description: ID
        type: string
      updated_at:
        description: 更新时间
        type: string
    type: object
  v1.RowFilters:
    properties:
      where:
        description: |-
          条件组列表

          前端要求空列表序列化 json 为 `[]` 所以不能使用 json tag omitempty
        items:
          $ref: '#/definitions/v1.Where'
        type: array
      where_relation:
        description: 条件组间关系
        type: string
    type: object
  v1.Where:
    properties:
      member:
        description: 限定对象
        items:
          $ref: '#/definitions/v1.Member'
        type: array
      relation:
        description: 限定关系
        type: string
    type: object
info:
  contact: {}
  description: AnyFabric auth service
  title: auth-service
  version: "0.0"
paths:
  /api/auth-service/v1/dwh-data-auth-request:
    get:
      consumes:
      - text/plain
      description: 获取数仓数据权限申请列表
      parameters:
      - description: 申请人
        in: query
        name: applicant
        type: string
      - description: 数据ID，支持多个
        in: query
        name: data_id
        type: string
      - description: 申请单名称
        in: query
        name: keyword
        type: string
      - default: 10
        description: 每页大小 默认 10
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - default: 1
        description: 页码 默认 1
        in: query
        minimum: 1
        name: offset
        type: integer
      - in: query
        name: phase
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PageResult-github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto_DataAuthFormListItem'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 获取列表
      tags:
      - 数仓数据权限申请
    post:
      consumes:
      - application/json
      description: 创建数仓数据权限申请
      parameters:
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestArg'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.IDResp'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 创建数仓数据权限申请
      tags:
      - 数仓数据权限申请
  /api/auth-service/v1/dwh-data-auth-request/{id}:
    delete:
      consumes:
      - text/plain
      description: 删除数仓数据申请单
      parameters:
      - description: 逻辑视图授权申请 ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - text/plain
      responses:
        "200":
          description: '成功响应参数: OK'
          schema:
            type: string
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 删除
      tags:
      - 数仓数据权限申请
    get:
      consumes:
      - text/plain
      description: 获取数仓数据权限申请详情
      parameters:
      - description: 逻辑视图授权申请 ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthFormDetail'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 获取数仓数据权限申请详情
      tags:
      - 数仓数据权限申请
    post:
      consumes:
      - text/plain
      description: 撤回数仓数据权限申请审核
      parameters:
      - in: query
        name: id
        required: true
        type: string
      produces:
      - text/plain
      responses:
        "200":
          description: 成功响应参数:OK
          schema:
            type: string
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 撤回审核
      tags:
      - 数仓数据权限申请
    put:
      consumes:
      - application/json
      description: 更新数仓数据权限申请
      parameters:
      - description: 数仓数据权限申请单ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestArg'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.DataAuthRequestArg'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 更新数仓数据权限申请
      tags:
      - 数仓数据权限申请
  /api/auth-service/v1/dwh-data-auth-request/audit:
    get:
      consumes:
      - text/plain
      description: 获取数仓数据权限申请审核列表
      parameters:
      - default: desc
        description: 排序方向 asc 正序 desc 倒序, 默认 desc
        enum:
        - asc
        - desc
        in: query
        name: direction
        type: string
      - default: 10
        description: 每页大小 默认 10
        in: query
        maximum: 100
        minimum: 1
        name: limit
        type: integer
      - default: 1
        description: 页码 默认 1
        in: query
        minimum: 1
        name: offset
        type: integer
      - default: create_time
        description: 排序类型 create_time 创建时间 update_time 更新时间, 默认 create_time
        enum:
        - create_time
        - update_time
        in: query
        name: sort
        type: string
      - description: 审核列表类型 tasks 待审核 historys 已审核
        enum:
        - tasks
        - historys
        in: query
        name: target
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PageResult-github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto_DataAuthReqFormAuditListItem'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 获取审核列表
      tags:
      - 数仓数据权限申请
  /api/auth-service/v1/enforce:
    post:
      consumes:
      - application/json
      description: 查询菜单资源的允许的操作
      parameters:
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          items:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyEnforce'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            items:
              $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyEnforceEffect'
            type: array
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 查询菜单资源的允许的操作
      tags:
      - 策略
  /api/auth-service/v1/indicator-dimensional-rules:
    get:
      consumes:
      - application/json
      parameters:
      - description: 排序的方向
        enum:
        - asc
        - desc
        in: query
        name: direction
        type: string
        x-enum-varnames:
        - Ascending
        - Descending
      - description: 未指定且非空时返回属于指定指标的维度规则
        in: query
        name: indicator_id
        type: integer
      - description: 每页显示的数量
        in: query
        name: limit
        type: integer
      - description: 页码，从 1 开始
        in: query
        name: offset
        type: integer
      - description: 排序的依据,为空时不排序
        enum:
        - is_authorized
        in: query
        name: sort
        type: string
        x-enum-varnames:
        - IndicatorDimensionalRuleSortIsAuthorized
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/v1.IndicatorDimensionalRuleList'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 获取指标维度规则
      tags:
      - 指标维度规则
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          $ref: '#/definitions/v1.IndicatorDimensionalRule'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/v1.IndicatorDimensionalRule'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 创建指标维度规则
      tags:
      - 指标维度规则
  /api/auth-service/v1/indicator-dimensional-rules/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 指标维度规则 ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/v1.IndicatorDimensionalRule'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 删除指标维度规则
      tags:
      - 指标维度规则
    get:
      consumes:
      - application/json
      parameters:
      - description: 指标维度规则 ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/v1.IndicatorDimensionalRule'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 获取指标维度规则
      tags:
      - 指标维度规则
  /api/auth-service/v1/indicator-dimensional-rules/{id}/spec:
    put:
      consumes:
      - application/json
      parameters:
      - description: 指标维度规则 ID
        format: uuid
        in: path
        name: id
        required: true
        type: string
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          $ref: '#/definitions/v1.IndicatorDimensionalRuleSpec'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/v1.IndicatorDimensionalRule'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 更新指标维度规则 Spec
      tags:
      - 指标维度规则
  /api/auth-service/v1/policy:
    delete:
      consumes:
      - application/json
      description: 策略删除
      parameters:
      - description: 资源id
        in: query
        maxLength: 128
        name: object_id
        required: true
        type: string
      - description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        in: query
        name: object_type
        required: true
        type: string
      - description: 策略ID，多个，支持逗号分割
        in: query
        name: policy_id
        type: string
      - example: 视图，接口，指标的ID
        in: query
        name: source_object_id
        type: string
      - description: 访问者id, 不传访问者id, 表示删除资源的全部授权, 传访问者id, 表示仅删除资源下该访问者的授权
        in: query
        maxLength: 128
        name: subject_id
        type: string
      - description: 访问者类型 app 应用 user 用户 department 部门 role 角色
        enum:
        - app
        - user
        - department
        - role
        in: query
        name: subject_type
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 策略删除
      tags:
      - 策略
    get:
      consumes:
      - application/json
      description: 策略详情
      parameters:
      - description: 资源id
        in: query
        maxLength: 128
        name: object_id
        required: true
        type: string
      - description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标
        enum:
        - domain
        - data_view
        - api
        - sub_service
        - sub_view
        - indicator
        - indicator_dimensional_rule
        in: query
        name: object_type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyGetRes'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 策略详情
      tags:
      - open策略
    post:
      consumes:
      - application/json
      description: 策略创建
      parameters:
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyCreateReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 策略创建
      tags:
      - 策略
    put:
      consumes:
      - application/json
      description: 策略更新
      parameters:
      - description: 请求参数
        in: body
        name: _
        required: true
        schema:
          $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.PolicyUpdateReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 策略更新
      tags:
      - 策略
  /api/auth-service/v1/sub-views:
    get:
      consumes:
      - application/json
      description: 获取用户拥有权限的子视图（行列规则）列表
      parameters:
      - description: |-
          动作，未指定时返回拥有任意动作的权限的子视图（行列规则）列表。

          query 绑定的参数名称是结构体字段名称的单数。
        in: query
        name: action
        type: string
      - description: 逻辑视图名称
        in: query
        name: logic_view_name
        required: true
        type: string
      - description: 用户 ID，获取此用户的有权限的子视图，默认为当前用户从 Authorization 获取。
        in: query
        name: user_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.ListSubViewsRes'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 获取用户拥有权限的子视图（行列规则）列表
  /api/auth-service/v1/subject/objects:
    get:
      consumes:
      - application/json
      description: 访问者拥有的资源
      parameters:
      - description: 资源id
        in: query
        name: object_id
        type: string
      - description: 资源类型 domain 主题域 data_view 逻辑视图 api 接口 sub_view 子视图 indicator
          指标, 多种类型用逗号分隔
        in: query
        name: object_type
        required: true
        type: string
      - description: 访问者id
        in: query
        maxLength: 128
        name: subject_id
        required: true
        type: string
      - description: 访问者类型 app 应用 user 用户 department 部门 role 角色
        enum:
        - app
        - user
        - department
        - role
        in: query
        name: subject_type
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应参数
          schema:
            $ref: '#/definitions/github_com_kweaver-ai_dsg_services_apps_auth-service_common_dto.GetObjectsBySubjectIdRes'
        "400":
          description: 失败响应参数
          schema:
            $ref: '#/definitions/rest.HttpError'
      summary: 访问者拥有的资源
      tags:
      - 策略
swagger: "2.0"
