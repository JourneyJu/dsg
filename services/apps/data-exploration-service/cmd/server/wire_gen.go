// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package server

import (
	"github.com/google/wire"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/callbacks"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/gorm/client_info"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/gorm/report"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/gorm/report_item"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/gorm/task_config"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/gorm/third_party_report"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/mdl-uniquery"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/mq"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/mq/data_exploration_handler"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/mq/kafka"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/redis_lock"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driven/virtualization_engine"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driver"
	v1_3 "github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driver/exploration/v1"
	v1_4 "github.com/kweaver-ai/dsg/services/apps/data-exploration-service/adapter/driver/task_config/v1"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/common/settings"
	impl4 "github.com/kweaver-ai/dsg/services/apps/data-exploration-service/domain/common/impl"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/domain/exploration"
	impl5 "github.com/kweaver-ai/dsg/services/apps/data-exploration-service/domain/exploration/impl"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/domain/exploration/impl/tools"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/domain/exploration/impl/v2"
	impl6 "github.com/kweaver-ai/dsg/services/apps/data-exploration-service/domain/task_config/impl"
	"github.com/kweaver-ai/dsg/services/apps/data-exploration-service/infrastructure/repository/db"
	"github.com/kweaver-ai/idrm-go-common/audit"
	v1_2 "github.com/kweaver-ai/idrm-go-common/middleware/v1"
	"github.com/kweaver-ai/idrm-go-common/rest/auth-service/v1"
	impl3 "github.com/kweaver-ai/idrm-go-common/rest/authorization/impl"
	impl2 "github.com/kweaver-ai/idrm-go-common/rest/configuration_center/impl"
	"github.com/kweaver-ai/idrm-go-common/rest/hydra/impl"
	"github.com/kweaver-ai/idrm-go-common/rest/user_management"
	"github.com/kweaver-ai/idrm-go-common/trace"
)

// Injectors from wire.go:

func InitApp(httpCfg settings.HttpConf) (*AppRunner, func(), error) {
	client := trace.NewOtelHttpClient()
	hydra := impl.NewHydraByService(client)
	drivenUserMgnt := user_management.NewUserMgntByService(client)
	driven := impl2.NewConfigurationCenterDrivenByService(client)
	logger := audit.Discard()
	authorizationDriven := impl3.NewDriven(client)
	authServiceInternalV1Interface, err := v1.NewInternalForBase(client)
	if err != nil {
		return nil, nil, err
	}
	middleware := v1_2.NewMiddleware(hydra, drivenUserMgnt, driven, logger, authorizationDriven, authServiceInternalV1Interface)
	data, cleanup, err := db.NewData()
	if err != nil {
		return nil, nil, err
	}
	mutex := redis_lock.NewMutex(data)
	repo := client_info.NewRepo(data)
	domain := impl4.NewCommonDomain(data, repo)
	virtualizationEngine := virtualization_engine.NewVirtualizationEngine(client)
	engineSource := tools.NewEngineSource(virtualizationEngine)
	reportRepo := report.NewRepo(data)
	task_configRepo := task_config.NewRepo(data)
	report_itemRepo := report_item.NewRepo(data)
	kafkaProducer, err := kafka.NewKafkaProducer()
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	third_party_reportRepo := third_party_report.NewRepo(data)
	drivenMDLUniQuery := mdl_uniquery.NewMDLUniQuery()
	explorationDomainImplV2, err := v2.NewExplorationDomain(data, mutex, domain, engineSource, reportRepo, task_configRepo, report_itemRepo, kafkaProducer, third_party_reportRepo, drivenMDLUniQuery)
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	explorationDomain := impl5.NewExplorationDomain(data, mutex, domain, engineSource, reportRepo, task_configRepo, report_itemRepo, kafkaProducer, third_party_reportRepo, drivenMDLUniQuery, explorationDomainImplV2)
	controller := v1_3.NewController(explorationDomain)
	task_configDomain := impl6.NewTaskConfigDomain(data, reportRepo, task_configRepo, mutex, engineSource, third_party_reportRepo, explorationDomain)
	v1Controller := v1_4.NewController(task_configDomain)
	router := &driver.Router{
		Middleware:                middleware,
		DataExplorationController: controller,
		TaskConfigController:      v1Controller,
	}
	server := driver.NewHttpServer(router, httpCfg)
	explorationServer := exploration.NewServer(data, reportRepo, task_configRepo, report_itemRepo)
	v := toTransportServer(server, explorationServer)
	app := newApp(v)
	mqClient, err := kafka.NewConsumerClient()
	if err != nil {
		cleanup()
		return nil, nil, err
	}
	dataExplorationHandler := data_exploration_handler.NewDataExplorationHandler(explorationDomain)
	mqHandler := mq.NewMQHandler(mqClient, dataExplorationHandler)
	entityChangeTransport := callbacks.NewEntityChangeTransport(kafkaProducer)
	transports := callbacks.NewTransport(data, entityChangeTransport)
	appRunner := &AppRunner{
		App:       app,
		Mq:        mqHandler,
		Callbacks: transports,
	}
	return appRunner, func() {
		cleanup()
	}, nil
}

// wire.go:

var appRunnerSet = wire.NewSet(wire.Struct(new(AppRunner), "*"))
